<div class="promotion-list-container">
  <div class="list-header">
    <h1>Gestion des Promotions</h1>
    <button routerLink="/promotions/ajouter" class="btn-primary">
      Ajouter une promotion
    </button>
  </div>

  <div class="promotion-list-card">
    <table class="modern-table">
      <thead>
        <tr>
          <th>Produit</th>
          <th>Valeur</th>
          <th>Période</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let promo of promotions">
          <td>
            <div class="product-cell">
              <span class="product-name">{{ promo.prod_id?.nom_prod || 'Produit inconnu' }}</span>
              <span *ngIf="promo.code_promo" class="promo-code-sub">{{ promo.code_promo }}</span>
            </div>
          </td>
          <td>
            <div class="promo-value">
              <span *ngIf="promo.type_prom === 'POURCENTAGE'">-{{ promo.montant?.$numberDecimal | number:'1.0-2'
                }}%</span>
              <span *ngIf="promo.type_prom !== 'POURCENTAGE'">-{{ promo.montant?.$numberDecimal | number:'1.0-0' }}
                Ar</span>
            </div>
          </td>
          <td>
            <div class="date-text">
              Du {{ promo.debut | date:'dd MMM yyyy' }}<br>
              au {{ promo.fin | date:'dd MMM yyyy' }}
            </div>
          </td>
          <td>
            <span class="status-badge" [ngClass]="promo.est_Active ? 'badge-active' : 'badge-expired'">
              {{ promo.est_Active ? 'Active' : 'Expirée' }}
            </span>
          </td>
          <td>
            <div class="action-buttons">
              <button [routerLink]="['/promotions/modifier', promo._id]" class="btn-icon-action" title="Modifier">
                <img src="/img/svg/icon-update.svg" alt="Modifier">
              </button>
              <button (click)="deletePromotion(promo._id)" class="btn-icon-action delete" title="Supprimer">
                <img src="/img/svg/icon-delete.svg" alt="Supprimer">
              </button>
            </div>
          </td>
        </tr>
        <tr *ngIf="promotions.length === 0">
          <td colspan="5" class="empty-state">Aucune promotion enregistrée.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>