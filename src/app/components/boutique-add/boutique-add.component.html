<div class="boutique-form-container">
    <div class="glass-card form-card">
        <h1>Ajouter une boutique</h1>
        <form #boutiqueForm="ngForm" (ngSubmit)="addBoutique()" class="modern-form">

            <div class="form-group">
                <label for="name">Nom de la boutique</label>
                <input type="text" id="name" name="name" [(ngModel)]="boutique.name" class="form-control"
                    placeholder="Ex: Ma Boutique" required>
            </div>

            <div class="form-group">
                <label for="categoryId">Cat√©gorie</label>
                <select id="categoryId" name="categoryId" [(ngModel)]="boutique.categoryId" class="form-control"
                    required>
                    <option value="" disabled selected>S√©lectionnez une cat√©gorie</option>
                    @for (cat of categories; track cat._id) {
                    <option [value]="cat._id">{{ cat.nom_cat }}</option>
                    }
                </select>
            </div>

            <div class="form-group">
                <label for="ownerId">Propri√©taire (Boutique)</label>
                <select id="ownerId" name="ownerId" [(ngModel)]="boutique.ownerId" class="form-control" required>
                    <option value="" disabled selected>S√©lectionnez un propri√©taire</option>
                    @for (user of users; track user._id) {
                    <option [value]="user._id">{{ user.firstname }} {{ user.lastname }} ({{ user.email }})</option>
                    }
                </select>
            </div>

            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" [(ngModel)]="boutique.description" class="form-control"
                    rows="4" placeholder="D√©crivez votre boutique..."></textarea>
            </div>

            <div class="form-section">
                <h3>Informations L√©gales</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="nif">NIF</label>
                        <input type="text" id="nif" name="nif" [(ngModel)]="boutique.legal.nif" class="form-control"
                            placeholder="Num√©ro d'Identification Fiscale">
                    </div>
                    <div class="form-group">
                        <label for="stat">STAT</label>
                        <input type="text" id="stat" name="stat" [(ngModel)]="boutique.legal.stat" class="form-control"
                            placeholder="Num√©ro Statistique">
                    </div>
                </div>
                <div class="form-group" style="margin-top: 1rem;">
                    <label for="rent">RENT (Patente/Loyer)</label>
                    <input type="text" id="rent" name="rent" [(ngModel)]="boutique.legal.rent" class="form-control"
                        placeholder="Num√©ro de Patente ou autre">
                </div>
            </div>

            <div class="form-group">
                <label for="images">Image(s) du boutique</label>
                <div class="file-input-wrapper">
                    <input type="file" id="images" (change)="onImageSelected($event)" class="file-input" multiple />
                    <div class="file-input-label">
                        <span>üìÅ Choisir des images</span>
                    </div>
                </div>

                <!-- Aper√ßu des nouvelles images -->
                @if (previews.length > 0) {
                <div class="image-previews-grid mt-3">
                    @for (preview of previews; track preview) {
                    <div class="preview-item">
                        <img [src]="preview" alt="Pr√©visualisation" class="img-preview">
                    </div>
                    }
                </div>
                }
            </div>

            <div class="form-actions">
                <button type="button" routerLink="/boutiques" class="btn-secondary">Annuler</button>
                <button type="submit" [disabled]="boutiqueForm.invalid" class="btn-primary">Ajouter la boutique</button>
            </div>
        </form>
    </div>
</div>